<head>
    <script>
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        var x = window.parent.matchMedia("only screen and (max-width: 425px)")
        function changeStyle() {
            var button = findButt(urlParams.get("name"));
            if (urlParams.get("ui_binSelect") == 1 || urlParams.get("ui_binSelect") == 2) {
                makeItBinarySelection(button, urlParams.get("ui_binSelect"))
            }
            for (let key of urlParams.keys()) {
                if (key != "name" && !key.includes("ui_")) {
                    button.style[key] = urlParams.get(key);
                }
            }
            //console.log(button.style);
        }
        function findButt(buttonName) {
            buttons = window.parent.document.getElementsByClassName("st-dg st-aj st-ak st-b0 st-dh st-di st-dj st-dk st-cs st-ct st-cu st-cv st-b5 st-dl st-ay st-dm st-dn st-do st-b9 st-dp st-ai st-dq st-dr st-ds st-dt st-d5 st-al st-cw st-am st-bm st-bn st-bo st-bp st-aq st-as st-ap st-ar st-du st-dv st-dw st-dx st-bl st-br st-dy st-dz st-e0 st-e1 st-e2 st-e3 st-e4 st-e5 st-e6 st-e7 st-e8 st-e9 st-ea st-eb");
            for (var i = 0; i < buttons.length; i++) {
                if (buttons[i].textContent == buttonName) {
                    return buttons[i];
                }
            }
        }
        function reverseChildNodes(node) {
            var parentNode = node.parentNode, nextSibling = node.nextSibling,
                frag = node.ownerDocument.createDocumentFragment();
            parentNode.removeChild(node);
            while (node.lastChild)
                frag.appendChild(node.lastChild);
            node.appendChild(frag);
            parentNode.insertBefore(node, nextSibling);
            return node;
        }
        function makeItBinarySelection(button, pos) {
            try {
                button.classList.add("flex");
            } catch (err) {
                window.parent.location.reload();
            }
            button.classList.add("flex-column");
            button.classList.add("elevated");
            button.classList.add("pr");
            button.classList.add("pl");
            button.classList.add("product-card");
            button.classList.add("mt");
            button.style["font-weight"] = "0";
            button.style["font-opacity"] = "0";
            button.style["opacity"] = "0";
            button.parentElement.classList.add("flex");
            button.parentElement.classList.add("flex-row");
            button.parentElement.classList.add("flex-space-around");
            button.parentElement.classList.add("mt");
            button.parentElement.classList.add("flex-m-column");
            if (button.parentElement.childNodes.length == 1) {
                var helperButton = button.cloneNode(true);
                helperButton.textContent = "XXX_PLACEHOLDER_XXX"
                if (pos == 1) {
                    button.parentElement.appendChild(helperButton);
                } else if (pos == 2) {
                    button.parentElement.insertBefore(helperButton, button)
                } else {
                    button.parentElement.appendChild(helperButton);
                }

            }
            button.style["z-index"] = 5;
            button.onmouseover = function () {
                this.style.opacity = "0.5";
            };
            button.onmouseout = function () {
                this.style.opacity = "0.0";
            };
            button.parentElement.style.position = "absolute";
            x.addListener(reposition) // Attach listener function on state
            reposition(x) // Puts it in the appropriate place
        }
        function reposition(x) {
            var button = findButt(urlParams.get("name"));
            var pos = urlParams.get("ui_binSelect");
            if (x.matches) { // If the thing is mobile
                if (pos == 1) {
                    button.parentElement.style.top = "-805px";
                } else if (pos == 2) {
                    button.parentElement.style.top = "-820px";
                } else {
                    button.parentElement.style.top = "-805px";
                }
            } else {
                if (pos == 1) {
                    button.parentElement.style.top = "-430px";
                } else if (pos == 2) {
                    button.parentElement.style.top = "-445px";
                } else {
                    button.parentElement.style.top = "-430px";
                }
            }
        }



    </script>
</head>

<body onload="changeStyle();">
    <button onclick="changeStyle();">Click here to find the buttons</button>
</body>