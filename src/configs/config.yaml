refresh_rate: 999999 # minutes

br:
    api:
        external: http://datasource.coronacidades.org/
        local: http://45.55.43.231:7000/
<<<<<<< HEAD
=======
        mapserver_external: http://datasource.coronacidades.org:5000/
        mapserver_local: http://192.168.0.5:5000/
>>>>>>> texts-update
        endpoints:
            simulacovid: "br/cities/simulacovid/main"
            rt:
                city: "br/cities/rt"
                health_region: "br/health_region/rt"
                state: "br/states/rt"
            farolcovid: 
                city: "br/cities/farolcovid/main"
                health_region: "br/health_region/farolcovid/main"
                state: "br/states/farolcovid/main"
            analysis:
                cases: "br/cities/cases/full"
                owid: "world/owid/heatmap"
            safereopen:
                economic_data: 
                    state: "br/states/safereopen/main"
                    health_region: "br/health_region/safereopen/main"
                cnae_sectors: "br/cnae/sectors"
            utilities:
                place_ids: "br/places/ids"
            maps: "br/maps"
    drive_paths:
        br_id_state_region_city: https://docs.google.com/spreadsheets/d/1pHkH9FZj-c_bCEdvCH9k54uog5QDEd_x5xi4YmDsqyY
        cities_population: https://docs.google.com/spreadsheets/d/1k8mXuUggBuBEghHhhLrLtA-5wa4JsAc-D35S5bNlf24
        health_infrastructure: https://docs.google.com/spreadsheets/d/1MqkUvMuC8C2rc_-U46ZOMgvG3MZ8KXg5NMoj68UBivQ
        embaixadores: https://docs.google.com/spreadsheets/d/1CASa-MdJS_o2tffWlIS--FSskSxhJUw3pA1L5AGIe04
        CNAE_sectors: https://docs.google.com/spreadsheets/d/1pP8dY9kRa9EvX3KcVPfMWJ8exDaoT1_bBggSKfD3y0k
        br_states_reopening_data: https://docs.google.com/spreadsheets/d/1H20RNeTJqON8cqhwiZJdfXqVYbFVKrG5
        br_health_region_reopening_data: https://docs.google.com/spreadsheets/d/1FB5GfHN0TGcC6YYCvoMLwZPN0chpHRMi
    cases:
        url: https://data.brasil.io/dataset/covid19/caso_full.csv.gz
        rename:
            city_ibge_code: 'city_id'
            city: 'city_name'
            state: 'state_id'
            date: 'last_updated'
            last_available_deaths: 'deaths'
            last_available_confirmed: 'confirmed_cases'
            new_confirmed: 'daily_cases'
            daily_cases_sum: 'infectious_period_cases'
        drop: [
            'estimated_population_2019',
            'is_last',
            'is_repeated',
            'last_available_confirmed_per_100k_inhabitants',
            'last_available_date',
            'last_available_death_rate',
            'new_deaths',
            'place_type',
            # 'state'
        ]
        notification_window_days: 7
    cnes:
        source: 'DataSUS'
    farolcovid:
        simulacovid:
            columns: [
                "state_num_id",
                "state_id",
                "state_name",
                "health_region_id",
                "health_region_name",
                "city_id",
                "city_name",
                "population",
                "last_updated_number_beds",
                "author_number_beds",
                "number_beds",
                "last_updated_number_ventilators",
                "author_number_ventilators",
                "number_ventilators",
                "confirmed_cases",
                "active_cases",
                "deaths",
                "notification_rate",
                # "state_notification_rate",
                "last_updated_number_icu_beds",
                "author_number_icu_beds",
                "number_icu_beds"
            ]   
            state_agg: {
                "population": sum,
                "confirmed_cases": sum,
                "active_cases": sum,
                "deaths": sum,
                "notification_rate": median, # TODO: remove after new dfs
                "number_beds": sum,
                "number_ventilators": sum,
                "number_icu_beds": sum,
            }   
            health_region_agg: {
                "population": sum,
                "confirmed_cases": sum,
                "active_cases": sum,
                "deaths": sum,
                "notification_rate": median, # TODO: remove after new dfs
                "number_beds": sum,
                "number_ventilators": sum,
                "number_icu_beds": sum,
            }  
        categories:
            {0: "novo normal", 1: "moderado", 2: "alto", 3: "altíssimo"}
        rules:
            # TODO: change new_cases column
            situation_classification:
                column_name: 'daily_cases_mavg_1mi'
                cuts: [0, 10, 20, 40, 100000]
                categories: [0, 1, 2, 3]

            control_classification:
                column_name: "rt_most_likely"
                cuts: [0, 0.5, 1, 1.2, 10]
                categories: [0, 1, 2, 3]

            # TODO: create growth column
            control_growth: 
                column_name: "rt_growth"
                cuts: [0, 0.9, 1.1, 1000]
                categories: ['melhorando', 'estabilizando', 'piorando⚠️']

            capacity_classification:
                column_name: 'dday_icu_beds_best'
                cuts: [0, 15, 30, 60, 91.001]
                categories: [3, 2, 1, 0]
            
            trust_classification:
                column_name: 'notification_rate'
                cuts: [0, 0.4, 0.6, 0.8, 1.001]
                categories: [3, 2, 1, 0]
    indicators:
        situation:
            risk: "situation_classification"
            right_display: "None" # TODO: add daily_cases_mavg_ndays
            left_display: "daily_cases_mavg_1mi_growth"
            display: "daily_cases_mavg_1mi"
        control:
            risk: "control_classification"
            right_display: "rt_growth"
            left_display: ["rt_low_95", "rt_high_95"]
            display: "None"
        capacity:
            risk: "capacity_classification"
            right_display: "number_icu_beds"
            left_display: "number_beds"
            display: "dday_icu_beds_best"
        trust:
            risk: "trust_classification"
            right_display: "new_deaths_growth"
            left_display: "new_deaths_mavg_1mi" 
            display: "notification_rate"
    inloco:
        replace: 
            "São Valério da Natividade":
                "state_name": "Tocantins"
                "correct_name": "São Valério"
            "Campo Grande":
                "state_name": "Rio Grande do Norte"
                "correct_name": "Augusto Severo"
            "Boa Saúde":
                "state_name": "Rio Grande do Norte"
                "correct_name": "Boa Saúde"
    rt_parameters:
        r_t_range_max: 12
        optimal_sigma: 0.01 # best sigma for Brazil (prior hyperparameters)
        window_size: 7
        gaussian_kernel_std: 2
        gaussian_min_periods: 7
        gamma_alpha: 4
        min_days: 14
    safereopen:
        rename:
            uf: "state_num_id"
            emprego: "n_employee"
            security_1: "security_index"
            massa_salarial: "total_wage_bill"
            ln_massa_salarial: "ln_total_wage_bill"
            sections: "sector"
    seir_parameters:
        # => new values:
        mild_duration: 6 # time from symptoms to hospitalization
        severe_duration: 6 # time from symptoms to ICU admit (12) - time from symptoms to hospitalization
        critical_duration: 8 # time from hospital admit to death (14) - duration of severe infections
        fatality_ratio: 0.02 # fraction of all symptomatic infected individuals who eventually die
        # => our values:
        doubling_rate: 1.15
        incubation_period: 5
        i1_percentage: 0.855
        i2_percentage: 0.12
        i3_percentage: 0.025
        infected_health_care_proportion: 0.05
    simulacovid:
        resources_available_proportion: 0.5
        columns:
            cnes: [
            "country_iso",
            "country_name",
            "state_num_id",
            "health_region_id",
            "city_id",
            "population",
            "last_updated_number_beds",
            "author_number_beds",
            "last_updated_number_ventilators",
            "author_number_ventilators",
            "number_ventilators",
            "number_beds",
            "number_icu_beds",
            "last_updated_number_icu_beds",
            "author_number_icu_beds",
        ]

impulso:
    contact:
        msg: "Olá Equipe Coronacidades. Vocês podem me ajuda com uma dúvida?"
        phone: "+551633823108"